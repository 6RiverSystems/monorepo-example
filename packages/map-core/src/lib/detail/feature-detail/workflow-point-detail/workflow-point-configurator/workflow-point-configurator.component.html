<form [formGroup]="form"
  (ngSubmit)="toggleDisclaimer(true)"
  *ngIf="workflowPointState &&
    (isWorkflowPointToggleEnabled || isQueueDepthToggleEnabled)
    && !patchingWorkflowPoint"
  class="workflow-point-config-form">
  <h3 class="mat-h2">Options</h3>
  <mat-slide-toggle
    *ngIf="isWorkflowPointToggleEnabled"
    formControlName="enabledControl"
    class="form-field"
    (change)="updateQueueDepthControl()">
    {{ enabled ? 'Enabled' : 'Disabled' }}
  </mat-slide-toggle>
  <mat-form-field *ngIf="isQueueDepthToggleEnabled" class="form-field">
    <input
      matInput
      formControlName="queueDepthControl"
      placeholder="Queue Depth"
      type="number"
      min="1"
      max="999"
      step="1">
    <mat-hint *ngIf="!enabled">Please enable the workflow point to change queue depth.</mat-hint>
    <mat-error *ngIf="queueDepthControl.invalid">
      Queue depth must be an integer between 1 and {{ maxQueueDepth }}.
    </mat-error>
  </mat-form-field>
  <button type="submit" [disabled]="form.pristine || form.invalid" class="confirmation-button" mat-raised-button>
    Confirm
  </button>
  <section *ngIf="showDisclaimer" class="confirmation-disclaimer">
    Are you sure you would like to make this change?
    <section class="disclaimer-buttons">
      <button (click)="patchWorkflowPointState()" mat-raised-button>Yes</button>
      <button (click)="toggleDisclaimer(false)" mat-raised-button>Cancel</button>
    </section>
  </section>
</form>

<div class="uploading-container" *ngIf="patchingWorkflowPoint">
	<div class="uploading-text">{{ uploadingMessage }}</div>
  <srs-spinner></srs-spinner>
</div>